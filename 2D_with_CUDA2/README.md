TODO:
- test alternative less complex updateParticlesByDensityField
- test resorting only after multiple updates
- calculate update_per_render instead of using a macro
- TODOs in code